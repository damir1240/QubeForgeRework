<!doctype html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QubeForge Rework</title>
    <link rel="icon" type="image/png" href="/icon.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <style>
        body {
            margin: 0;
            background-color: #000;
            overflow: hidden;
            font-family: sans-serif;
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        #bg-image,
        #inventory-menu,
        #drag-icon,
        #tooltip,
        #crosshair,
        #ui-container,
        #damage-overlay,
        #main-menu,
        #pause-menu,
        #settings-menu,
        #blocker,
        #mobile-ui {
            display: none;
        }
    </style>
</head>

<body>
    <div id="loading-screen">
        <h1 style="font-size: 24px; margin-bottom: 20px; font-weight: normal;">Загрузка...</h1>
        <div id="loading-bar-container"
            style="width: 200px; height: 4px; background: #222; position: relative; overflow: hidden;">
            <div id="loading-bar-inner" style="width: 0%; height: 100%; background: #fff; transition: width 0.1s;">
            </div>
        </div>
    </div>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/sw.js");
        }
    </script>

    <img id="bg-image" src="/background.webp" alt="Background" />

    <div id="inventory-menu" style="display: none">
        <h2 style="font-size: 20px; margin-bottom: 20px">Инвентарь</h2>
        <div id="inventory-grid">
        </div>
    </div>

    <div id="drag-icon"></div>
    <div id="tooltip"></div>

    <div id="crosshair" style="display: none"></div>
    <div id="ui-container" style="display: none">
        <div id="hotbar-label"></div>
        <div id="health-bar"></div>
        <div id="hotbar"></div>
    </div>
    <div id="damage-overlay"></div>

    <div id="main-menu">
        <img src="/logo.webp" id="game-logo" alt="QubeForge Rework" />
        <div id="main-menu-buttons">
            <button id="btn-new-game" class="menu-btn">Новая Игра</button>
            <button id="btn-continue" class="menu-btn">Продолжить</button>
            <button id="btn-mods" class="menu-btn">Моды</button>
            <button id="btn-settings-main" class="menu-btn">
                Настройки
            </button>
        </div>
    </div>

    <div id="pause-menu" style="display: none">
        <div id="pause-menu-container">
            <h2 style="font-size: 30px">Пауза</h2>
            <button id="btn-resume" class="menu-btn">Продолжить</button>
            <button id="btn-settings-pause" class="menu-btn">
                Настройки
            </button>
            <button id="btn-exit" class="menu-btn">
                Сохранить и Выйти
            </button>
        </div>
    </div>

    <div id="settings-menu" style="display: none">
        <div id="settings-menu-container">
            <h2 style="font-size: 30px">Настройки</h2>
            <div class="setting-item">
                <label for="cb-shadows">Тени</label>
                <input type="checkbox" id="cb-shadows" checked />
            </div>
            <div class="setting-item">
                <label for="cb-clouds">Облака</label>
                <input type="checkbox" id="cb-clouds" checked />
            </div>
            <button id="btn-back-settings" class="menu-btn">Назад</button>
        </div>
    </div>

    <div id="blocker" style="display: none">
        <div id="instructions">
            <p style="font-size: 24px">Кликни, чтобы вернуться</p>
            <p style="font-size: 14px; line-height: 2">
                Движение: W, A, S, D<br />
                Прыжок: ПРОБЕЛ<br />
                Обзор: Мышь<br />
                Действие: ЛКМ / ПКМ<br />
                Хотбар: 1-9 или Скролл<br />
                Инвентарь: E<br />
                Пауза: ESC
            </p>
        </div>
    </div>
    <div id="app"></div>

    <div id="mobile-ui">

        <div id="joystick-zone">
            <div id="joystick-base"></div>
            <div id="joystick-stick"></div>
        </div>
        <div id="btn-run" class="mob-btn" style="display: none">БЕГ</div>
        <div id="mobile-actions">
            <div id="btn-jump" class="mob-btn">ПРЫГ</div>
            <div id="btn-attack" class="mob-btn">АТК</div>
            <div id="btn-place" class="mob-btn">ИСП</div>
        </div>
        <div id="btn-inv" class="mob-btn">ИНВ</div>
        <div class="mob-btn" id="btn-menu">МЕНЮ</div>
    </div>

    <script type="module" src="/src/main.ts"></script>
</body>

</html>